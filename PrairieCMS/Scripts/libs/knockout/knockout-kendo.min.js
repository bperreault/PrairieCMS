//knockout-kendo v0.5.1 | (c) 2012 Ryan Niemeyer | http://www.opensource.org/licenses/mit-license
(function(e){typeof require=="function"&&typeof exports=="object"&&typeof module=="object"?e(require("knockout"),require("jquery"),require("kendo")):typeof define=="function"&&define.amd?define(["knockout","jquery","kendo"],e):e(window.ko,window.jQuery,window.kendo)})(function(e,t,n,r){e.kendo=e.kendo||{},e.kendo.BindingFactory=function(){var n=this;this.createBinding=function(r){if(!t()[r.parent||r.name])return;var i={};i.init=function(e,t,s,o,u){var a=n.buildOptions(r,t);if(a.async===!0||r.async===!0&&a.async!==!1){setTimeout(function(){i.setup(e,a,u)},0);return}i.setup(e,a,u);if(a&&a.useKOTemplates)return{controlsDescendantBindings:!0}},i.setup=function(i,s,o){var u,a=t(i);n.setupTemplates(r.templates,s,i,o),u=n.getWidget(r,s,a),n.handleEvents(s,r,i,u),n.watchValues(u,s,r,i),u.destroy&&e.utils.domNodeDisposal.addDisposeCallback(i,function(){u.destroy()})},i.options={},i.widgetConfig=r,e.bindingHandlers[r.bindingName||r.name]=i},this.buildOptions=function(t,n){var r=t.defaultOption,i=e.utils.extend({},e.bindingHandlers[t.name].options),s=e.utils.unwrapObservable(n());return typeof s!="object"||r&&!(r in s)?i[r]=n():e.utils.extend(i,s),i};var i=function(t,n){return function(r){return e.renderTemplate(t,n.createChildContext(r._raw&&r._raw()||r))}};this.setupTemplates=function(t,n,r,s){var o,u,a,f;if(t&&n&&n.useKOTemplates){for(o=0,u=t.length;o<u;o++)a=t[o],n[a]&&(n[a]=i(n[a],s));f=n.dataBound,n.dataBound=function(){e.memoization.unmemoizeDomNodeAndDescendants(r),f&&f.apply(this,arguments)}}},this.getWidget=function(t,n,r){var i;if(t.parent){var s=r.closest("[data-bind*='"+t.parent+":']");i=s.length?s.data(t.parent):null}else i=r[t.name](e.toJS(n)).data(t.name);return e.isObservable(n.widget)&&n.widget(i),i},this.watchValues=function(e,t,r,i){var s,o=r.watch;if(o)for(s in o)o.hasOwnProperty(s)&&n.watchOneValue(s,e,t,r,i)},this.watchOneValue=function(n,i,s,o,u){var a=e.computed({read:function(){var a,f,l=o.watch[n],c=e.utils.unwrapObservable(s[n]),h=o.parent?[u]:[];t.isArray(l)?l=i[c?l[0]:l[1]]:typeof l=="string"?l=i[l]:f=!0,l&&s[n]!==r&&(f?h.push(c,s):(a=l.apply(i,h),h.push(c)),(f||a!==c)&&l.apply(i,h))},disposeWhenNodeIsRemoved:u});e.isObservable(s[n])||a.dispose()},this.handleEvents=function(t,r,i,s){var o,u,a=r.events;if(a)for(o in a)a.hasOwnProperty(o)&&(u=a[o],typeof u=="string"&&(u={value:u,writeTo:u}),e.isObservable(t[u.writeTo])&&n.handleOneEvent(o,u,t,i,s,r.childProp))},this.handleOneEvent=function(e,t,n,r,i,s){i.bind(e,function(e){var i,o;if(!s||!e[s]||e[s]===r)i=t.value,o=typeof i=="string"&&this[i]?this[i](s&&r):i,n[t.writeTo](o)})}},e.kendo.bindingFactory=new e.kendo.BindingFactory,e.kendo.setDataSource=function(t,n,r){var i,s;if(!r||!r.useKOTemplates)i=e.mapping&&n&&n.__ko_mapping__,s=n&&i?e.mapping.toJS(n):e.toJS(n);t.dataSource.data(s||n)},function(){var e=n.data.ObservableArray.fn.wrap;n.data.ObservableArray.fn.wrap=function(t){var n=e.apply(this,arguments);return n._raw=function(){return t},n}}();var i=function(t){return function(n){n&&(e.utils.extend(this.options[t],n),this.redraw(),this.value(.001+this.value()))}},s=e.kendo.bindingFactory.createBinding.bind(e.kendo.bindingFactory),o="close",u="collapse",a="content",f="data",l="enable",c="expand",h="enabled",p="expanded",d="isOpen",v="max",m="min",g="open",y="resize",b="search",w="select",E="selected",S="size",x="title",T="value",N="values";s({name:"kendoAutoComplete",events:{change:T,open:{writeTo:d,value:!0},close:{writeTo:d,value:!1}},watch:{enabled:l,search:[b,o],data:function(t){e.kendo.setDataSource(this,t)},value:T}}),s({name:"kendoCalendar",defaultOption:T,events:{change:T},watch:{max:v,min:m,value:T}}),s({name:"kendoComboBox",events:{change:T,open:{writeTo:d,value:!0},close:{writeTo:d,value:!1}},watch:{enabled:l,isOpen:[g,o],data:function(t){e.kendo.setDataSource(this,t)},value:T}}),s({name:"kendoDatePicker",defaultOption:T,events:{change:T,open:{writeTo:d,value:!0},close:{writeTo:d,value:!1}},watch:{enabled:l,max:v,min:m,value:T,isOpen:[g,o]}}),s({name:"kendoDateTimePicker",defaultOption:T,events:{change:T,open:{writeTo:d,value:!0},close:{writeTo:d,value:!1}},watch:{enabled:l,max:v,min:m,value:T,isOpen:[g,o]}}),s({name:"kendoDropDownList",events:{change:T,open:{writeTo:d,value:!0},close:{writeTo:d,value:!1}},watch:{enabled:l,isOpen:[g,o],data:function(t){e.kendo.setDataSource(this,t)},value:T}}),s({name:"kendoEditor",defaultOption:T,events:{change:T},watch:{enabled:l,value:T}}),s({name:"kendoGrid",defaultOption:f,watch:{data:function(t,n){e.kendo.setDataSource(this,t,n)}},templates:["rowTemplate","altRowTemplate"]}),s({name:"kendoListView",defaultOption:f,watch:{data:function(t,n){e.kendo.setDataSource(this,t,n)}},templates:["template"]}),s({name:"kendoMenu",async:!0}),s({name:"kendoMenuItem",parent:"kendoMenu",watch:{enabled:l,isOpen:[g,o]},async:!0}),s({name:"kendoNumericTextBox",defaultOption:T,events:{change:T},watch:{enabled:l,value:T,max:function(e){this.options.max=e,this.value()>e&&this.value(e)},min:function(e){this.options.min=e,this.value()<e&&this.value(e)}}}),s({name:"kendoPanelBar",async:!0}),s({name:"kendoPanelItem",parent:"kendoPanelBar",watch:{enabled:l,expanded:[c,u]},childProp:"item",events:{expand:{writeTo:p,value:!0},collapse:{writeTo:p,value:!1}},async:!0}),s({name:"kendoRangeSlider",defaultOption:N,events:{change:N},watch:{values:N,enabled:l}}),s({name:"kendoSlider",defaultOption:T,events:{change:T},watch:{value:T,enabled:l}}),s({name:"kendoSplitter",async:!0}),s({name:"kendoSplitterPane",parent:"kendoSplitter",watch:{max:v,min:m,size:S,expanded:[c,u]},childProp:"pane",events:{collapse:{writeTo:p,value:!1},expand:{writeTo:p,value:!0},resize:S},async:!0}),s({name:"kendoTabStrip",async:!0}),s({name:"kendoTab",parent:"kendoTabStrip",watch:{enabled:l},childProp:"item",async:!0}),s({name:"kendoTimePicker",defaultOption:T,events:{change:T},watch:{max:v,min:m,value:T,enabled:l,isOpen:[g,o]}}),s({name:"kendoTreeView",async:!0}),s({name:"kendoTreeItem",parent:"kendoTreeView",watch:{enabled:l,expanded:[c,u],selected:function(e,t){this.select(t?e:null)}},childProp:"node",events:{collapse:{writeTo:p,value:!1},expand:{writeTo:p,value:!0},select:{writeTo:E,value:!0}},async:!0}),s({name:"kendoUpload",watch:{enabled:l}}),s({async:!0,name:"kendoWindow",events:{open:{writeTo:d,value:!0},close:{writeTo:d,value:!1}},watch:{content:a,title:x,isOpen:[g,o]}}),s({name:"kendoChart",watch:{data:function(t){e.kendo.setDataSource(this,t)}}}),s({name:"kendoLinearGauge",defaultOption:T,watch:{value:T,gaugeArea:i("gaugeArea"),pointer:i("pointer"),scale:i("scale")}}),s({name:"kendoRadialGauge",defaultOption:T,watch:{value:T,gaugeArea:i("gaugeArea"),pointer:i("pointer"),scale:i("scale")}})})